@page "/informationAboutPersonalData"
@using System.ComponentModel.DataAnnotations
@using ClassLibrary1
@inject HttpClient Http
@inject NavigationManager NavigationManager

<PageTitle>Information About Personal Data</PageTitle>
<MudText Align="Align.Center" Typo="Typo.h1" Style="text-transform: uppercase;"><strong>Zmiana danych osobowych</strong></MudText>
<MudGrid>
    <MudItem xs="6">
        <MudCard Class="pa-3" Style="width:100%;background:rgb(223,243,156);border-radius: 20px;">
            <MudCardContent>
                <!-- Sekcja opis -->
                <MudStack Spacing="5">
                    @* @foreach (var uzytkownik in uzytkownicy) *@
                    @* { *@
                    @* <MudText Align="Align.Left" Typo="Typo.h4"><strong>Informację o Tobie </strong></MudText> *@
                    @* <MudText Typo="Typo.subtitle1">Pseudonim:@uzytkownik.pseudonim</MudText> *@
                    @* <MudText Typo="Typo.subtitle1">Adres mail:@uzytkownik.email</MudText>} *@
                    
                    <MudText Align="Align.Left" Typo="Typo.h4"><strong>Informację o Tobie </strong></MudText>
                    <MudText Typo="Typo.subtitle1">Pseudonim: @uzytkownicy!.pseudonim</MudText>
                    <MudText Typo="Typo.subtitle1">Adres mail: @uzytkownicy!.email</MudText>
                    <MudText Typo="Typo.subtitle1">Data urodzenia: @uzytkownicy!.data_urodzenia</MudText>
                    <MudText Typo="Typo.subtitle1">Data urodzenia: @uzytkownicy!.data_urodzenia</MudText>
                    <MudText Typo="Typo.subtitle1">Płeć: @uzytkownicy!.plec</MudText>
                    <MudText Typo="Typo.subtitle1">Wzrost: @uzytkownicy!.wzrost</MudText>
                    <MudText Typo="Typo.subtitle1">Waga: @uzytkownicy!.waga</MudText>


                </MudStack>
                <MudButton ButtonType="ButtonType.Submit"
                           Variant="Variant.Filled" Style="width: auto;background:rgb(255,152,107);border-radius: 20px;"
                           OnClick=changeData>
                    Edytuj
                </MudButton>
                <MudText Align="Align.Left" Typo="Typo.h4"><strong>Zapotrzebowanie kaloryczne: </strong></MudText>
                <MudButton ButtonType="ButtonType.Submit"
                           Variant="Variant.Filled" Style="width: auto;background:rgb(255,152,107);border-radius: 20px;"
                           Href="/caloryCount">
                    Oblicz na nowo zapotrzebowanie kaloryczne
                </MudButton>
            </MudCardContent>
        </MudCard>
    </MudItem>

    <!-- Sekcja grafiki -->
    <MudItem xs="6">
        <MudCard Style="width:100%; position: relative;">
            <MudImage Fluid="true" Src="/Images/PersonalData/DataImage.png" Alt="Image" Class="rounded-lg"/>
        </MudCard>
    </MudItem>
</MudGrid>

@code{
    //Obsługa endpointów
    private Uzytkownik? uzytkownicy= new Uzytkownik();
    private const int UserId = 51;

    protected override async Task OnInitializedAsync()
    { 
   
            var userResponse = await Http.GetFromJsonAsync<ServiceResponse<Uzytkownik>>($"api/user/{UserId}");//dodac api
            if(userResponse!.Success)
                uzytkownicy = userResponse.Data;

    }

    private void changeData()
    {
        NavigationManager.NavigateTo($"/informationAboutPersonalData/decisionWhatPersonalDataChange/{UserId}");
    }

}
